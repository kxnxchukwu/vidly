{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Kenechukwu\\\\vidly\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\Kenechukwu\\\\vidly\\\\src\\\\components\\\\common\\\\form.jsx\";\nimport React, { Component } from 'react';\nimport Joi from 'joi-browser';\n\nclass Form extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {},\n      errors: {}\n    };\n\n    this.validate = () => {\n      const options = {\n        abortEarly: false\n      };\n\n      const _Joi$validate = Joi.validate(this.state.data, this.schema, options),\n            error = _Joi$validate.error;\n\n      if (!error) return null;\n      const errors = {};\n\n      for (let item of error.details) errors[item.path[0]] = item.message;\n\n      return errors;\n    };\n\n    this.validateProperty = ({\n      name,\n      value\n    }) => {\n      const obj = {\n        [name]: value\n      };\n      const schema = {\n        [name]: this.schema[name]\n      };\n\n      const _Joi$validate2 = Joi.validate(obj, schema),\n            error = _Joi$validate2.error;\n\n      return error ? error.details[0].meessage : null;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n\n    this.handleChange = ({\n      currentTarget: input\n    }) => {\n      const errors = _objectSpread({}, this.state.errors);\n\n      const errorMessage = this.validateProperty(input);\n      if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n\n      const data = _objectSpread({}, this.state.data);\n\n      data[input.name] = input.value;\n      this.setState({\n        data,\n        errors\n      });\n    };\n\n    this.renderButton = label => {\n      return React.createElement(\"button\", {\n        disabled: this.validate(),\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, label);\n    };\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["C:\\Users\\Kenechukwu\\vidly\\src\\components\\common\\form.jsx"],"names":["React","Component","Joi","Form","state","data","errors","validate","options","abortEarly","schema","error","item","details","path","message","validateProperty","name","value","obj","meessage","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","currentTarget","input","errorMessage","renderButton","label"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,aAAhB;;AAEA,MAAMC,IAAN,SAAmBF,SAAnB,CAA6B;AAAA;AAAA;AAAA,SACzBG,KADyB,GACjB;AACJC,MAAAA,IAAI,EAAC,EADD;AAEJC,MAAAA,MAAM,EAAC;AAFH,KADiB;;AAAA,SAMxBC,QANwB,GAMb,MAAM;AACd,YAAMC,OAAO,GAAG;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAhB;;AADc,4BAEEP,GAAG,CAACK,QAAJ,CAAa,KAAKH,KAAL,CAAWC,IAAxB,EAA8B,KAAKK,MAAnC,EAA2CF,OAA3C,CAFF;AAAA,YAEPG,KAFO,iBAEPA,KAFO;;AAId,UAAI,CAACA,KAAL,EAAY,OAAO,IAAP;AAEZ,YAAML,MAAM,GAAG,EAAf;;AACA,WAAK,IAAIM,IAAT,IAAiBD,KAAK,CAACE,OAAvB,EACEP,MAAM,CAACM,IAAI,CAACE,IAAL,CAAU,CAAV,CAAD,CAAN,GAAuBF,IAAI,CAACG,OAA5B;;AACA,aAAOT,MAAP;AACH,KAhBsB;;AAAA,SAkBvBU,gBAlBuB,GAkBJ,CAAC;AAACC,MAAAA,IAAD;AAAOC,MAAAA;AAAP,KAAD,KAAmB;AACpC,YAAMC,GAAG,GAAG;AAAE,SAACF,IAAD,GAAQC;AAAV,OAAZ;AACA,YAAMR,MAAM,GAAG;AAAE,SAACO,IAAD,GAAQ,KAAKP,MAAL,CAAYO,IAAZ;AAAV,OAAf;;AAFoC,6BAGpBf,GAAG,CAACK,QAAJ,CAAaY,GAAb,EAAkBT,MAAlB,CAHoB;AAAA,YAG7BC,KAH6B,kBAG7BA,KAH6B;;AAIpC,aAAOA,KAAK,GAAGA,KAAK,CAACE,OAAN,CAAc,CAAd,EAAiBO,QAApB,GAA+B,IAA3C;AACD,KAvBsB;;AAAA,SAyBvBC,YAzBuB,GAyBRC,CAAC,IAAI;AAClBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMjB,MAAM,GAAG,KAAKC,QAAL,EAAf;AACA,WAAKiB,QAAL,CAAc;AAAElB,QAAAA,MAAM,EAAEA,MAAM,IAAI;AAApB,OAAd;AACA,UAAIA,MAAJ,EAAY;AACZ,WAAKmB,QAAL;AACD,KA/BsB;;AAAA,SAiCvBC,YAjCuB,GAiCR,CAAC;AAAEC,MAAAA,aAAa,EAAEC;AAAjB,KAAD,KAA8B;AAC3C,YAAMtB,MAAM,qBAAQ,KAAKF,KAAL,CAAWE,MAAnB,CAAZ;;AACA,YAAMuB,YAAY,GAAG,KAAKb,gBAAL,CAAsBY,KAAtB,CAArB;AACA,UAAIC,YAAJ,EAAkBvB,MAAM,CAACsB,KAAK,CAACX,IAAP,CAAN,GAAqBY,YAArB,CAAlB,KACK,OAAOvB,MAAM,CAACsB,KAAK,CAACX,IAAP,CAAb;;AACL,YAAMZ,IAAI,qBAAQ,KAAKD,KAAL,CAAWC,IAAnB,CAAV;;AACAA,MAAAA,IAAI,CAACuB,KAAK,CAACX,IAAP,CAAJ,GAAmBW,KAAK,CAACV,KAAzB;AACA,WAAKM,QAAL,CAAc;AAAEnB,QAAAA,IAAF;AAAQC,QAAAA;AAAR,OAAd;AACD,KAzCsB;;AAAA,SA0CvBwB,YA1CuB,GA0CPC,KAAD,IAAW;AACtB,aAAQ;AAAQ,QAAA,QAAQ,EAAE,KAAKxB,QAAL,EAAlB;AAAmC,QAAA,SAAS,EAAC,iBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgEwB,KAAhE,CAAR;AACH,KA5CsB;AAAA;;AAAA;;AA+C7B,eAAe5B,IAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport Joi from 'joi-browser';\r\n\r\nclass Form extends Component {\r\n    state = { \r\n        data:{},\r\n        errors:{}\r\n     };\r\n\r\n     validate = () => {\r\n        const options = {abortEarly: false};\r\n        const {error} = Joi.validate(this.state.data, this.schema, options);\r\n    \r\n        if (!error) return null;\r\n    \r\n        const errors = {};\r\n        for (let item of error.details)\r\n          errors[item.path[0]] = item.message;\r\n          return errors;\r\n      };\r\n    \r\n      validateProperty = ({name, value}) => {\r\n        const obj = { [name]: value };\r\n        const schema = { [name]: this.schema[name] };\r\n        const {error} = Joi.validate(obj, schema);\r\n        return error ? error.details[0].meessage : null;\r\n      };\r\n\r\n      handleSubmit = e => {\r\n        e.preventDefault();\r\n        const errors = this.validate();\r\n        this.setState({ errors: errors || {} });\r\n        if (errors) return;\r\n        this.doSubmit();\r\n      };\r\n\r\n      handleChange = ({ currentTarget: input }) => {\r\n        const errors = { ...this.state.errors };\r\n        const errorMessage = this.validateProperty(input);\r\n        if (errorMessage) errors[input.name] = errorMessage;\r\n        else delete errors[input.name];\r\n        const data = { ...this.state.data };\r\n        data[input.name] = input.value;\r\n        this.setState({ data, errors });\r\n      };\r\n      renderButton = (label) => {\r\n          return  <button disabled={this.validate()} className=\"btn btn-primary\">{label}</button>\r\n      }\r\n}\r\n \r\nexport default Form;"]},"metadata":{},"sourceType":"module"}